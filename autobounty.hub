-- üåä Auto Bounty Hub (Fast Safe Fly Version)
-- By ChatGPT + SDVT Team

-- =======================
-- Custom Loading UI
-- =======================
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

local LoadGui = Instance.new("ScreenGui")
LoadGui.Name = "AutoBountyLoader"
LoadGui.Parent = CoreGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 400, 0, 150)
Frame.Position = UDim2.new(0.5, -200, 0.5, -75)
Frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
Frame.BorderSizePixel = 0
Frame.Parent = LoadGui
Frame.AnchorPoint = Vector2.new(0.5,0.5)
Frame.BackgroundTransparency = 0.2
Frame.ClipsDescendants = true
local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0,15)

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundTransparency = 1
Title.Text = "üåä Auto Bounty Hub22"
Title.TextColor3 = Color3.fromRGB(0, 255, 200)
Title.TextScaled = true
Title.Font = Enum.Font.GothamBold
Title.Parent = Frame

local BarBG = Instance.new("Frame")
BarBG.Size = UDim2.new(0.9, 0, 0, 15)
BarBG.Position = UDim2.new(0.05, 0, 0.6, 0)
BarBG.BackgroundColor3 = Color3.fromRGB(50,50,50)
BarBG.BorderSizePixel = 0
BarBG.Parent = Frame
local UICorner2 = Instance.new("UICorner", BarBG)

local Bar = Instance.new("Frame")
Bar.Size = UDim2.new(0, 0, 1, 0)
Bar.BackgroundColor3 = Color3.fromRGB(0, 255, 200)
Bar.BorderSizePixel = 0
Bar.Parent = BarBG
local UICorner3 = Instance.new("UICorner", Bar)

local Status = Instance.new("TextLabel")
Status.Size = UDim2.new(1,0,0,40)
Status.Position = UDim2.new(0,0,0.75,0)
Status.BackgroundTransparency = 1
Status.Text = "Loading..."
Status.TextColor3 = Color3.fromRGB(200,200,200)
Status.TextScaled = true
Status.Font = Enum.Font.Gotham
Status.Parent = Frame

task.spawn(function()
    for i = 1,100 do
        TweenService:Create(Bar, TweenInfo.new(0.02, Enum.EasingStyle.Linear), {
            Size = UDim2.new(i/100, 0, 1, 0)
        }):Play()
        Status.Text = "Loading... " .. i .. "%"
        task.wait(0.02)
    end
    task.wait(0.3)
    TweenService:Create(Frame, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
    TweenService:Create(Bar, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
    TweenService:Create(BarBG, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
    TweenService:Create(Title, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
    TweenService:Create(Status, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
    task.wait(0.6)
    LoadGui:Destroy()
end)

-- =======================
-- Auto Bounty Core
-- =======================
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TeleportService = game:GetService("TeleportService")

-- ====== TUNE HERE ======
local flySpeed = 500           -- bay nhanh h∆°n
local maxStepPerFrame = 25
local attackDistance = 20
local noDamageTimeout = 5
local lowHpThreshold = 0.30
local healHopThreshold = 0.70

local attackedPlayers = {}

-- ====== FLY SAFE ======
local function safeFlyTo(targetPos)
    local char = LocalPlayer.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local hrp = char.HumanoidRootPart

    while (hrp.Position - targetPos).Magnitude > 5 do
        local dir = (targetPos - hrp.Position).Unit
        local step = math.min((targetPos - hrp.Position).Magnitude, maxStepPerFrame)
        hrp.CFrame = hrp.CFrame + dir * step
        task.wait(0.05)
    end
end

-- ====== PRESS KEY ======
local function pressKey(key)
    pcall(function()
        key = key:upper()
        UserInputService.InputBegan:Fire({
            KeyCode = Enum.KeyCode[key],
            UserInputType = Enum.UserInputType.Keyboard
        }, true)
    end)
end

-- ====== COMBO ======
local function attackSequence()
    -- slot 2
    pressKey("Two")
    task.wait(0.2)
    pressKey("Z")
    task.wait(0.1)
    pressKey("C")
    task.wait(0.1)
    pressKey("X")

    -- slot 3
    pressKey("Three")
    task.wait(0.2)
    pressKey("Z")
    task.wait(0.1)
    pressKey("X")

    -- spam T + Y
    for i = 1,3 do
        pressKey("T")
        task.wait(0.05)
        pressKey("Y")
        task.wait(0.05)
    end

    -- quay v·ªÅ slot 1 (ƒë√°nh th∆∞·ªùng)
    pressKey("One")
    local char = LocalPlayer.Character
    if char then
        local tool = char:FindFirstChildOfClass("Tool")
        if tool then
            for i=1,5 do
                tool:Activate()
                task.wait(0.1)
            end
        end
    end
end

-- ====== GET TARGET ======
local function getTarget()
    local char = LocalPlayer.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local hrp = char.HumanoidRootPart

    local closest, dist = nil, math.huge
    for _, plr in ipairs(Players:GetPlayers()) do
        if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") and not attackedPlayers[plr.UserId] then
            local d = (hrp.Position - plr.Character.HumanoidRootPart.Position).Magnitude
            if d < dist then
                closest, dist = plr, d
            end
        end
    end
    return closest
end

-- ====== SERVER HOP ======
local function serverHop()
    local gameId = game.PlaceId
    TeleportService:Teleport(gameId, LocalPlayer)
end

-- ====== MAIN LOOP ======
task.spawn(function()
    while task.wait(1) do
        local myChar = LocalPlayer.Character
        if not myChar or not myChar:FindFirstChild("Humanoid") then continue end

        local hum = myChar.Humanoid
        if hum.Health/hum.MaxHealth < lowHpThreshold then
            -- bay xa ra ƒë·ªÉ tr√°nh ch·∫øt
            safeFlyTo(myChar.HumanoidRootPart.Position + Vector3.new(0,100,0))
            repeat task.wait(1) until hum.Health/hum.MaxHealth > healHopThreshold
            serverHop()
        end

        local target = getTarget()
        if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
            local tHum = target.Character:FindFirstChild("Humanoid")
            local tHRP = target.Character.HumanoidRootPart
            local startHp = tHum and tHum.Health or 0

            safeFlyTo(tHRP.Position + Vector3.new(0,5,0))
            attackSequence()

            local startTime = tick()
            repeat
                task.wait(0.5)
                if not tHum or tHum.Health <= 0 then
                    attackedPlayers[target.UserId] = true
                    break
                end
            until tick() - startTime > noDamageTimeout

            if tHum and tHum.Health == startHp then
                -- kh√¥ng m·∫•t m√°u -> b·ªè qua target n√†y
                attackedPlayers[target.UserId] = true
            end
        else
            -- kh√¥ng c√≤n ai trong server -> hop
            serverHop()
        end
    end
end)
