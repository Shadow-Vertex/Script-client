-- Auto Bounty & Skill Menu UI
-- By ChatGPT

-- Load Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- ====== SERVICES ======
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- ====== SETTINGS ======
local settings = {
    UseMelee = false,
    UseFruit = false,
    UseSword = false,
    UseGun   = false,
}

-- ====== FUNCTION DÙNG CHIÊU ======
local function tryUseAbility(key)
    -- Thử activate tool hiện đang cầm
    local char = LocalPlayer.Character
    if char then
        local tool = char:FindFirstChildOfClass("Tool")
        if tool then
            pcall(function() tool:Activate() end)
            print("Dùng tool với phím", key)
        end
    end

    -- Nếu game có remote skill thì sửa chỗ này cho đúng tên remote
    local remoteFolder = ReplicatedStorage:FindFirstChild("Remotes")
    if remoteFolder then
        for _, r in pairs(remoteFolder:GetDescendants()) do
            if r:IsA("RemoteEvent") then
                pcall(function()
                    r:FireServer("UseSkill", key)
                    r:FireServer(key)
                end)
            end
        end
        print("Fired remote cho key:", key)
    end
end

-- ====== WINDOW ======
local Window = Rayfield:CreateWindow({
    Name = "Auto Bounty Skills Menu",
    LoadingTitle = "Run script",
    LoadingSubtitle = "Script SDVT Team",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "AutoBountyMenu",
        FileName = "cfg"
    }
})

-- ====== TAB ======
local Tab = Window:CreateTab("Setting", 11602940797)

-- ========== MELEE ==========
Tab:CreateToggle({
    Name = "Melee (Z, X, C)",
    CurrentValue = settings.UseMelee,
    Callback = function(v)
        settings.UseMelee = v
        if v then
            tryUseAbility("Z")
            tryUseAbility("X")
            tryUseAbility("C")
        end
    end
})

-- ========== FRUIT ==========
Tab:CreateToggle({
    Name = "Fruit (Z, X, C, V, F)",
    CurrentValue = settings.UseFruit,
    Callback = function(v)
        settings.UseFruit = v
        if v then
            tryUseAbility("Z")
            tryUseAbility("X")
            tryUseAbility("C")
            tryUseAbility("V")
            tryUseAbility("F")
        end
    end
})

-- ========== SWORD ==========
Tab:CreateToggle({
    Name = "Sword (Z, X)",
    CurrentValue = settings.UseSword,
    Callback = function(v)
        settings.UseSword = v
        if v then
            tryUseAbility("Z")
            tryUseAbility("X")
        end
    end
})

-- ========== GUN ==========
Tab:CreateToggle({
    Name = "Gun (Z, X)",
    CurrentValue = settings.UseGun,
    Callback = function(v)
        settings.UseGun = v
        if v then
            tryUseAbility("Z")
            tryUseAbility("X")
        end
    end
})
