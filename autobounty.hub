-- Auto Bounty & Skill Menu UI
-- By ChatGPT

-- Load Rayfield
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- ====== SERVICES ======
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- ====== SETTINGS ======
local settings = {
    AbilityKeys = {
        Melee = { Z = false, X = false, C = false },
        Fruit = { Z = false, X = false, C = false, V = false, F = false },
        Sword = { Z = false, X = false },
        Gun   = { Z = false, X = false },
    }
}

-- ====== FUNCTION DÙNG CHIÊU ======
local function tryUseAbility(key)
    -- Thử activate tool hiện đang cầm
    local char = LocalPlayer.Character
    if char then
        local tool = char:FindFirstChildOfClass("Tool")
        if tool then
            pcall(function() tool:Activate() end)
            print("Dùng tool với phím", key)
        end
    end

    -- Nếu game có remote skill thì sửa chỗ này cho đúng tên remote
    local remoteFolder = ReplicatedStorage:FindFirstChild("Remotes")
    if remoteFolder then
        for _, r in pairs(remoteFolder:GetDescendants()) do
            if r:IsA("RemoteEvent") then
                pcall(function()
                    r:FireServer("UseSkill", key)
                    r:FireServer(key)
                end)
            end
        end
        print("Fired remote cho key:", key)
    end
end

-- ====== WINDOW ======
local Window = Rayfield:CreateWindow({
    Name = "Auto Bounty Skills Menu",
    LoadingTitle = "Run script",
    LoadingSubtitle = "Script SDVT Team",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "AutoBountyMenu",
        FileName = "cfg"
    }
})

-- ====== TAB ======
local Tab = Window:CreateTab("Setting", 11602940797)

-- ========== MELEE ==========
local meleeSec = Tab:CreateSection("Melee")

for _, k in ipairs({ "Z", "X", "C" }) do
    Tab:CreateToggle({
        Name = "Use " .. k,
        CurrentValue = settings.AbilityKeys.Melee[k],
        Callback = function(v)
            settings.AbilityKeys.Melee[k] = v
            if v then tryUseAbility(k) end
        end
    })
end

-- ========== FRUIT ==========
local fruitSec = Tab:CreateSection("Fruit")

for _, k in ipairs({ "Z", "X", "C", "V", "F" }) do
    Tab:CreateToggle({
        Name = "Use " .. k,
        CurrentValue = settings.AbilityKeys.Fruit[k],
        Callback = function(v)
            settings.AbilityKeys.Fruit[k] = v
            if v then tryUseAbility(k) end
        end
    })
end

-- ========== SWORD ==========
local swordSec = Tab:CreateSection("Sword")

for _, k in ipairs({ "Z", "X" }) do
    Tab:CreateToggle({
        Name = "Use " .. k,
        CurrentValue = settings.AbilityKeys.Sword[k],
        Callback = function(v)
            settings.AbilityKeys.Sword[k] = v
            if v then tryUseAbility(k) end
        end
    })
end

-- ========== GUN ==========
local gunSec = Tab:CreateSection("Gun")

for _, k in ipairs({ "Z", "X" }) do
    Tab:CreateToggle({
        Name = "Use " .. k,
        CurrentValue = settings.AbilityKeys.Gun[k],
        Callback = function(v)
            settings.AbilityKeys.Gun[k] = v
            if v then tryUseAbility(k) end
        end
    })
end
